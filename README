1  Install Maven 2.
2 checkout repository
3 type 'mvn'
4 configure couchdb

[external]
fti= /usr/bin/java -jar /path/to/couchdb-lucene*-jar-with-dependencies.jar

[httpd_db_handlers]
_fti = {couch_httpd_external, handle_external_req, <<"fti">>}

Indexing

Currently all fields of all documents are indexed, javascript control coming soon.

Numbers are padded so that you can perform correct range searches. e.g, a '0' becomes '00000000000000'. 

Examples

http://localhost:5984/dbname/_fti?q=field_name:value

http://localhost:5984/dbname/_fti?q=field_name:value&sort=other_field

http://localhost:5984/dbname/_fti?debug=true&sort=billing_size&q=body:document AND customer:[00000000000000 TO 00000000000010]

return values is a JSON array of _id, _rev and sort_field values (the latter only when sort= is supplied)

Parameters

q                - the query to run (e.g, subject:hello)
sort  (optional) - the field to sort on 
asc   (optional) - sort ascending (true) or descending (false)
limit (optional) - the maximum number of results to return
skip  (optional) - the number of results to skip
debug (optional) - if false, a normal application/json response with results appears. if true, an pretty-printed HTML blob is returned instead.

Development

To develop "live", type "mvn dependency:unpack-dependencies" and change the external line to something like this;

fti=/usr/bin/java -cp /home/rnewson/Source/couchdb-lucene/target/classes:/home/rnewson/Source/couchdb-lucene/target/dependency org.apache.couchdb.lucene.Main
